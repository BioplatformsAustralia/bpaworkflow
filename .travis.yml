sudo: required
matrix:
  fast_finish: true
services:
- docker
before_install:
- docker pull bioplatformsaustralia/bioplatforms-composer
script:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- chmod 755 ~/.docker
- chmod 644 ~/.docker/config.json
- export "GIT_BRANCH=$TRAVIS_BRANCH"
- test x"$TRAVIS_PULL_REQUEST_BRANCH" != x"" && export "GIT_BRANCH=$TRAVIS_PULL_REQUEST_BRANCH" || echo "This build is not a PR."
- export "BRANCH_NAME=$GIT_BRANCH"
- bash -x ./travis-build.sh
- bash -x ./travis-prodbuild.sh
env:
  global:
  - DOCKER_USERNAME: devredbox
  - secure: h+zHC50ZVS69gilr21JORAmS4Wt7AvkCg1uw6+cdTEhuEQTJsjQr5Xk+ucnnFJa/SBwki11oiId7OyTSHSnzGHNSm5RxC52cE4wUXWDp2Y3ts8C1i79LtgIiZy7BgCI6ZBHpCBFRv8WdwEYI3CS3hXymcbtf84wxgWznLJCeQJDtOQrn7sXJ9IQYByjgi+Kog7IpQIEb+hBu1MMO1m1DdJtJffSPB2k2KjJ6KrgBRLjsO2kQ9pJfh4F9JLvWrqPngQK5iKsJTI5rHli0X5RhVHDvm3kzEMdSvfCoTPN2owRnEgOAJIzA3lHKeWTlAjL3rDiIXzx0/TclH2SO0K9QFVrNoUd9+KZ6jPKR+J5wUzU3D7LWwDXgcp8A4ehMXqLMIMDH1aQyb4+fG/D2uMWvzQOvKOQG2Qt/yYFs/stfQgxcp1A+XFy25hYR0eoRypunpyY+TFmb/2/C68WQxY9PIjoLnUvbuyEFDR25oxMVykK+r4kfha5QPIgB3Dusmx+357bMN6yXBehiACOpNqLRbzi4V7UlM1EQJruppAuHlpdtjXl7ZohCXOxOCbZlUcb9vpg/4pxub3KtsKJJBoaQ48Cwpp1ZN3MDeD4MO9fLlWiizcVB0/Kg5B+3K+mIJluqML2ZuYrlw+FHigmonUJZBaEqukbK0BtbVTI8TTOikIk=
